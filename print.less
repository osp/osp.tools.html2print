/* __________________________________ DEBUG __________________________________ */
html.debug {
    /*outline: 1px solid purple;*/

    body {
        /*outline: 1px solid pink;*/
    }
    div.preview-page {
        outline: 1px solid blue;
    }

    div#content {
        outline: 1px solid red;
    }
    .page-break {
        border-top: 1px dashed blue;
    }
    .page {
        outline: 1px solid purple;
    }
}
/* __________________________________ VARIABLES __________________________________ */


@page-height: 210mm;
@page-width: 148.5mm;
@spread: @page-width*2;

@crop-length: 7mm;
@crop-offset: 5mm;
@crop: @crop-length + @crop-offset;    // Based on Scribus cropmarks with 5mm of bleed -> 7mm of marks + 5mm of offset
@page-width-crop: @page-width + (@crop*2); 
@page-height-crop: @page-height + (@crop*2);

@page-margin-inside: 20mm;
@page-margin-outside: 10mm;
@page-margin-top: 10mm;
@page-margin-bottom: 20mm;

/* __________________________________ PAGE SETTINGS  __________________________________ */
* {
    -webkit-print-color-adjust: exact;  /* Allows printing of background colors */
    box-sizing: border-box;
}

@page {
    //size: @page-width @page-height; // format coup√©
    size: @page-width-crop @page-height-crop;  // format avec cropmarks
    margin: 0;
}

html {
    width: @page-width-crop;
}
body {
}

.page {
    height: @page-height;
    width: @page-width;
    margin: @crop;
    margin-bottom: @crop*2;
    padding-top: @page-margin-top;
    padding-bottom: @page-margin-bottom;

    &:nth-child(odd) {
        padding-left: @page-margin-inside;
        padding-right: @page-margin-outside;
    }
    &:nth-child(even) {
        padding-left: @page-margin-outside;
        padding-right: @page-margin-inside;
    }
}
div#container .page {
    -webkit-flow-from: myFlow;
    page-break-after: always;
}
div#content {
    -webkit-flow-into: myFlow;
}

/* __________________________________ PRINT MARKS  __________________________________ */
div#print-marks {
    position: absolute;
    top: 0;
    z-index: 1000;
    width: 100%; 
}
div.preview-page {
    width: @page-width-crop; 
    height: @page-height-crop;
    //position: absolute; 
    position: relative;
    z-index: -10;
    outline-offset: -@crop;
    /*display: block;*/
}
 
/* __________________________________ CROP MARKS  __________________________________ */
div.crop-top-left,
div.crop-top-right,
div.crop-bottom-right,
div.crop-bottom-left {
    height: @crop;
    width:  @crop;
    position: absolute;
    /*box-sizing: border-box;*/
}
 
div.crop-top-left {
    left: 0;
    top: 0;
}
div.crop-top-right {
    right: 0;
    top: 0;
}
div.crop-bottom-right {
    right: 0;
    bottom: 0;
}
div.crop-bottom-left {
    left: 0;
    bottom: 0;
}
div.crop-top,
div.crop-right,
div.crop-bottom,
div.crop-left {
    width: @crop-length;
    height: @crop-length;
    position: absolute;
    /*box-sizing: border-box;*/
}
div.crop-top {
    border-top: 1px solid black;
}
div.crop-right {
    border-right: 1px solid black;
}
div.crop-bottom {
    border-bottom: 1px solid black;
}
div.crop-left {
    border-left: 1px solid black;
}
 
/* __________________________________ PAGINATION __________________________________ */
/*div.folio {*/
    /*position: absolute;*/
    /*bottom: 20mm;*/
    /*width: 100%;*/
    /*text-align: center;*/
    /*z-index: 1000;*/
/*}*/

/* __________________________________ CONTENT __________________________________ */
div#content {
}

h1, h2, h3, h4, h5, h6 {
    /* Avoids headings to be cut or to be orphans. 
     * But it doesn't seem to work 
     * if the element after has a page-break-inside avoid. It tries its best! */
    -webkit-region-break-inside: avoid;
    region-break-inside: avoid;
    /*-webkit-region-break-after: avoid;*/
}
.page-break {
    /* Apply this class to an element to put it on a new page.
     * Hint: 
     * You can also use an empty <div class="page-break"></div> 
     * if you want to put manual page breaks without attaching it to an HTML element
     */
    page-break-before: always;
}

/* AN EXAMPLE TO AVOID PAGE BREAK INSIDE, 
 * HERE NO PARAGRAPH WILL BE CUT, 
 * BUT YOU MIGHT WANT TO DEACTIVATE THIS */
p {
    /*page-break-inside: avoid;*/
}

